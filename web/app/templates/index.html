
{% extends 'base.html' %}

{% block body %}

  <!--search bar-->
  <div class="container">
    <!--form method="POST"-->
    <!--{{ form.hidden_tag() }}-->
    <div class="row">
      <div class="col-sm-4">
        <h2>Baby Stuff</h2>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-2"> 
        <!--{{ form.keywords() }}-->
        <input name="keywords" type=text style="width:200px">
      </div>
      <div class="col-sm-2">
        <button id="search" type="submit" class="button-primary" onclick="KWSearch()">Search</button>
      </div>
      <div class="col-sm-4">
      </div>
      <div clss="col-sm-4">
        <!--button id="recommend" type=submit class="button-primary" onclick="$.ajax({url:'/recommend'})">New Recommendations</button-->
      </div>
    </div>
    <!--/form-->
  </div>


<button id="recommend" type=submit class="button-primary" onclick="$.ajax({url:'/recommend'})">New Recommendations</button>

  <!--recommendations-->
  <div class="container">
    <div class="row">
      {% if products %}
         {% for product in products %}
           <div class='col-sm-1'>
             <input id=product
                    type=image
                    name=display 
                    src={{product['imUrl']}}
                    width=72
                    height=72
                    value={{product['asin']}}
             />
           </div>
         {% endfor%}
      {%endif%}
    </div>
  </div>

  <br><br><br><br>

  <!--display of products-->
  <div class="container">
    <div class="row">
      <div class='col-sm-4'>
        <span id=prdct_image></span><br>
      </div>
      <div class='col-sm-8'>
        <span id=prdct_title></span><br><br>
        <span id=prdct_brand></span><br><br>
        <span id=prdct_price></span><br><br>
        <span id=prdct_description></span><br><br>
      </div>
    </div>
  </div>

{% endblock body %}

{% block js %}

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <script type=text/javascript>
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  </script>


  <!--search by keywords-->
  <script type=text/javascript>
    function KWSearch(){
      var keywords = $('input[name="keywords"]').val()
      $.ajax({
            {
              type: 'POST',
              url: "/",
              dataType:'json',
              data: JSON.stringify( { "message" : "didyoureceive?" } ),
              success: function(data) {console.log(data)}
            }
            })
     }

  </script>

  <!--get product details and display-->
  <script type=text/javascript>
    $(function() {
      $('input#product').bind('click', function() {
        $.getJSON($SCRIPT_ROOT + '/display', {
          a: $(this).val()
        }, function(data) {
          $("#prdct_title").text(data.title);
          $("#prdct_description").text(data.description);
          $("#prdct_brand").text("brand: "+data.brand);
          $("#prdct_price").text("price: $"+data.price);
          var image = document.createElement("IMG");
          image.src=data.imUrl;
          image.height=200;
          image.align='center';
          $("#prdct_image").html(image)
        });
        return false;
      });
    });
  </script>

{% endblock js %}

